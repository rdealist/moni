# GPG Agent Configuration Example
#
# LOCATION (Platform-Specific):
# - Linux/macOS/WSL: ~/.gnupg/gpg-agent.conf
# - Windows (Gpg4win): %APPDATA%\gnupg\gpg-agent.conf
#   (Typically: C:\Users\<Username>\AppData\Roaming\gnupg\gpg-agent.conf)
# - Windows (Git Bash GPG): ~/.gnupg/gpg-agent.conf
#   (Resolves to: C:\Users\<Username>\.gnupg\gpg-agent.conf)
#
# IMPORTANT FOR WINDOWS USERS:
# Windows has TWO GPG installations (Gpg4win + Git Bash GPG) with DIFFERENT config locations.
# Verify which GPG Git is using: git config --global gpg.program
# If output is "C:/Program Files (x86)/GnuPG/bin/gpg.exe" → Use Gpg4win location
# If output is "/usr/bin/gpg" or blank → Use Git Bash GPG location
#
# This file configures the GPG agent's passphrase caching behavior.
# After editing, restart the agent: gpgconf --kill gpg-agent

# ==============================================================================
# PASSPHRASE CACHING
# ==============================================================================

# Cache passphrase for 8 hours (28800 seconds) of inactivity
# After you enter your passphrase, it remains cached for this duration
# Each time you sign a commit, the timer resets
default-cache-ttl 28800

# Maximum cache time of 24 hours (86400 seconds) regardless of use
# Even with continuous commits, passphrase expires after this time
# Forces re-authentication at least once per day
max-cache-ttl 86400

# Allow pinentry to cache the passphrase in memory
# Required for the above cache TTL settings to work
allow-preset-passphrase

# ==============================================================================
# PINENTRY CONFIGURATION
# ==============================================================================

# Pinentry program to use for passphrase prompts
#
# WINDOWS (REQUIRED for reliable caching):
# Windows users MUST specify pinentry-program for passphrase caching to work properly.
# Without this line, caching may fail even with correct cache TTL settings.
#
# Uncomment ONE of the following based on your platform and preference:

# Windows (Gpg4win) - Basic GUI dialog (RECOMMENDED - uncomment this for Windows)
# NOTE: Use forward slashes (/) not backslashes (\) in the path
pinentry-program C:/Program Files (x86)/GnuPG/bin/pinentry-basic.exe

# Windows (Gpg4win) - Windows native dialog (alternative)
#pinentry-program C:/Program Files (x86)/GnuPG/bin/pinentry-w32.exe

# Windows (Gpg4win) - Qt GUI dialog (if Qt installed)
#pinentry-program C:/Program Files (x86)/GnuPG/bin/pinentry-qt.exe

# macOS - Native macOS dialog (install: brew install pinentry-mac)
#pinentry-program /usr/local/bin/pinentry-mac

# Linux - GTK dialog
#pinentry-program /usr/bin/pinentry-gtk-2

# Linux - Qt dialog
#pinentry-program /usr/bin/pinentry-qt

# Linux - GNOME dialog
#pinentry-program /usr/bin/pinentry-gnome3

# ==============================================================================
# SECURITY SETTINGS (OPTIONAL)
# ==============================================================================

# Maximum time to cache SSH passphrases (if using GPG agent for SSH)
# default-cache-ttl-ssh 1800

# Disable usage of passphrase history (more secure, less convenient)
# ignore-cache-for-signing

# ==============================================================================
# DEBUGGING (OPTIONAL - ENABLE ONLY FOR TROUBLESHOOTING)
# ==============================================================================

# Enable logging for debugging
# log-file /tmp/gpg-agent.log
# debug-level basic

# ==============================================================================
# ALTERNATIVE CACHE CONFIGURATIONS
# ==============================================================================

# HIGH SECURITY (Shared machines, client work, public workspaces)
# Prompt frequently, minimal cache window
# default-cache-ttl 900       # 15 minutes
# max-cache-ttl 3600          # 1 hour maximum

# BALANCED SECURITY (Normal development, private office)
# Prompt every ~hour, expires by end of day
# default-cache-ttl 3600      # 1 hour
# max-cache-ttl 28800         # 8 hours maximum

# CONVENIENCE (Personal development, trusted private machine)
# Prompt once per workday, expires overnight
# default-cache-ttl 28800     # 8 hours
# max-cache-ttl 86400         # 24 hours maximum

# ==============================================================================
# NOTES
# ==============================================================================
#
# Time values are in seconds:
# - 900 = 15 minutes
# - 1800 = 30 minutes
# - 3600 = 1 hour
# - 28800 = 8 hours
# - 86400 = 24 hours
# - 604800 = 1 week
#
# Platform-specific notes:
# - Windows: pinentry-program line is REQUIRED (already uncommented above)
# - Linux/macOS: pinentry-program is optional (comment out Windows line if not needed)
#
# Config file location:
# - Windows (Gpg4win): %APPDATA%\gnupg\gpg-agent.conf
# - Windows (Git Bash): ~/.gnupg/gpg-agent.conf
# - Linux/macOS/WSL: ~/.gnupg/gpg-agent.conf
#
# After editing this file, restart the GPG agent:
#   gpgconf --kill gpg-agent
#   gpgconf --launch gpg-agent
#
# Verify configuration loaded:
#   gpgconf --list-options gpg-agent | grep cache-ttl
#
# Verify which GPG Git is using (Windows):
#   git config --global gpg.program
#
# Test caching:
#   git commit --allow-empty -m "Test 1"  # Enter passphrase
#   git commit --allow-empty -m "Test 2"  # Should NOT prompt (cache hit)
#
